<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1711px" preserveAspectRatio="none" style="width:1312px;height:1711px;background:#FFFFFF;" version="1.1" viewBox="0 0 1312 1711" width="1312px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="261" x="521.75" y="40.6357">FreeBSD HTTP Request Lifecycle</text><rect fill="#FFFFFF" height="1649.9219" style="stroke:#181818;stroke-width:0.5;" width="359.5" x="1" y="55.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="139.75" y="68.0044">User space</text><rect fill="#FFFFFF" height="1649.9219" style="stroke:#181818;stroke-width:0.5;" width="160.5" x="365.5" y="55.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="385.75" y="68.0044">Transport layer</text><rect fill="#FFFFFF" height="1649.9219" style="stroke:#181818;stroke-width:0.5;" width="483" x="595" y="55.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108" x="782.5" y="68.0044">Network layer</text><rect fill="#FFFFFF" height="1649.9219" style="stroke:#181818;stroke-width:0.5;" width="117" x="1080" y="55.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="1102.5" y="68.0044">Link layer</text><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="203.5" y="182.5"/><rect fill="#FFFFFF" height="373.5391" style="stroke:#181818;stroke-width:1.0;" width="10" x="385.5" y="352.2969"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="488.6328"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="582.5703"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="654.7031"/><rect fill="#FFFFFF" height="430.8672" style="stroke:#181818;stroke-width:1.0;" width="10" x="495.5" y="396.2344"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="500.5" y="762.9688"/><rect fill="#FFFFFF" height="479.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="607.5" y="827.1016"/><rect fill="#FFFFFF" height="255.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1133.5" y="1361.8984"/><rect fill="#FFFFFF" height="166.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1138.5" y="1399.0313"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="1143.5" y="1465.2969"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="1143.5" y="1537.4297"/><rect fill="#F8E4E4" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="277.5" x="254.5" y="314.0313"/><rect fill="#F8E4E4" height="43.9375" style="stroke:none;stroke-width:1.0;" width="277.5" x="254.5" y="360.2969"/><rect fill="#F8E4E4" height="279.4688" style="stroke:#000000;stroke-width:1.5;" width="263" x="349.5" y="418.2344"/><rect fill="#F8E4E4" height="89.2656" style="stroke:#000000;stroke-width:1.5;" width="243" x="359.5" y="442.3672"/><rect fill="#F8E4E4" height="159.0703" style="stroke:none;stroke-width:1.0;" width="263" x="349.5" y="538.6328"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="350" x="589" y="1137.0313"/><rect fill="#F8E4E4" height="161.3984" style="stroke:#000000;stroke-width:1.5;" width="182" x="1074" y="1419.0313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="208.5" x2="208.5" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310.5" x2="310.5" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="390.5" x2="390.5" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="500" x2="500" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="612" x2="612" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1001" x2="1001" y1="151.3672" y2="1626.5625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1138" x2="1138" y1="151.3672" y2="1626.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="148.0654">Sender</text><ellipse cx="33.5" cy="83.5703" fill="#F8CDCC" rx="8" ry="8" style="stroke:#B70000;stroke-width:0.5;"/><path d="M33.5,91.5703 L33.5,118.5703 M20.5,99.5703 L46.5,99.5703 M33.5,118.5703 L20.5,133.5703 M33.5,118.5703 L46.5,133.5703 " fill="none" style="stroke:#B70000;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="1638.5576">Sender</text><ellipse cx="33.5" cy="1650.3594" fill="#F8CDCC" rx="8" ry="8" style="stroke:#B70000;stroke-width:0.5;"/><path d="M33.5,1658.3594 L33.5,1685.3594 M20.5,1666.3594 L46.5,1666.3594 M33.5,1685.3594 L20.5,1700.3594 M33.5,1685.3594 L46.5,1700.3594 " fill="none" style="stroke:#B70000;stroke-width:0.5;"/><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="72" x="172.5" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="179.5" y="140.0654">Browser</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="72" x="172.5" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="179.5" y="1645.5576">Browser</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="92" x="264.5" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="271.5" y="140.0654">Socket API</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="92" x="264.5" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="271.5" y="1645.5576">Socket API</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="42" x="369.5" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="376.5" y="140.0654">TCP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="42" x="369.5" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="376.5" y="1645.5576">TCP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="43" x="479" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="486" y="140.0654">UDP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="43" x="479" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="486" y="1645.5576">UDP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="27" x="599" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="606" y="140.0654">IP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="27" x="599" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="606" y="1645.5576">IP</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="145" x="929" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="936" y="140.0654">Network Interface</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="145" x="929" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="936" y="1645.5576">Network Interface</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="109" x="1084" y="120.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1091" y="140.0654">Device driver</text><rect fill="#F8CDCC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#B70000;stroke-width:0.5;" width="109" x="1084" y="1625.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1091" y="1645.5576">Device driver</text><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="203.5" y="182.5"/><rect fill="#FFFFFF" height="373.5391" style="stroke:#181818;stroke-width:1.0;" width="10" x="385.5" y="352.2969"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="488.6328"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="582.5703"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="390.5" y="654.7031"/><rect fill="#FFFFFF" height="430.8672" style="stroke:#181818;stroke-width:1.0;" width="10" x="495.5" y="396.2344"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="500.5" y="762.9688"/><rect fill="#FFFFFF" height="479.9648" style="stroke:#181818;stroke-width:1.0;" width="10" x="607.5" y="827.1016"/><rect fill="#FFFFFF" height="255.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1133.5" y="1361.8984"/><rect fill="#FFFFFF" height="166.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1138.5" y="1399.0313"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="1143.5" y="1465.2969"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="1143.5" y="1537.4297"/><polygon fill="#B70000" points="191.5,178.5,201.5,182.5,191.5,186.5,195.5,182.5" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="33.5" x2="197.5" y1="182.5" y2="182.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="40.5" y="177.4341">GET https://google.com</text><polygon fill="#B70000" points="298.5,207.6328,308.5,211.6328,298.5,215.6328,302.5,211.6328" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="213.5" x2="304.5" y1="211.6328" y2="211.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="220.5" y="206.5669">socket()</text><polygon fill="#B70000" points="224.5,236.7656,214.5,240.7656,224.5,244.7656,220.5,240.7656" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="218.5" x2="309.5" y1="240.7656" y2="240.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="230.5" y="235.6997">new socket</text><polygon fill="#B70000" points="298.5,265.8984,308.5,269.8984,298.5,273.8984,302.5,269.8984" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="213.5" x2="304.5" y1="269.8984" y2="269.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="220.5" y="264.8325">connect()</text><polygon fill="#B70000" points="298.5,295.0313,308.5,299.0313,298.5,303.0313,302.5,299.0313" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="208.5" x2="304.5" y1="299.0313" y2="299.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="215.5" y="293.9653">send(data)</text><path d="M254.5,314.0313 L320.5,314.0313 L320.5,321.1641 L310.5,331.1641 L254.5,331.1641 L254.5,314.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="277.5" x="254.5" y="314.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="269.5" y="327.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="156" x="335.5" y="326.2417">[HTTP, FTP, SMPT, NFS]</text><polygon fill="#B70000" points="373.5,348.2969,383.5,352.2969,373.5,356.2969,377.5,352.2969" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="310.5" x2="379.5" y1="352.2969" y2="352.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="317.5" y="347.231">sosend()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254.5" x2="532" y1="361.2969" y2="361.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="78" x="259.5" y="371.5073">[DNS, TFTP]</text><polygon fill="#B70000" points="483.5,392.2344,493.5,396.2344,483.5,400.2344,487.5,396.2344" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="310.5" x2="489.5" y1="396.2344" y2="396.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="317.5" y="391.1685">sosend()</text><path d="M349.5,418.2344 L415.5,418.2344 L415.5,425.3672 L405.5,435.3672 L349.5,435.3672 L349.5,418.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="279.4688" style="stroke:#000000;stroke-width:1.5;" width="263" x="349.5" y="418.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="364.5" y="431.3013">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="84" x="430.5" y="430.4448">[so_snd_full]</text><path d="M359.5,442.3672 L437.5,442.3672 L437.5,449.5 L427.5,459.5 L359.5,459.5 L359.5,442.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="89.2656" style="stroke:#000000;stroke-width:1.5;" width="243" x="359.5" y="442.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="374.5" y="455.4341">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="145" x="452.5" y="454.5776">[until so_snd not full]</text><line style="stroke:#B70000;stroke-width:1.0;" x1="400.5" x2="442.5" y1="480.6328" y2="480.6328"/><line style="stroke:#B70000;stroke-width:1.0;" x1="442.5" x2="442.5" y1="480.6328" y2="493.6328"/><line style="stroke:#B70000;stroke-width:1.0;" x1="401.5" x2="442.5" y1="493.6328" y2="493.6328"/><polygon fill="#B70000" points="411.5,489.6328,401.5,493.6328,411.5,497.6328,407.5,493.6328" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="407.5" y="475.5669">sbwait()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349.5" x2="612.5" y1="539.6328" y2="539.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="354.5" y="549.8433">[so_snd not full]</text><line style="stroke:#B70000;stroke-width:1.0;" x1="400.5" x2="442.5" y1="574.5703" y2="574.5703"/><line style="stroke:#B70000;stroke-width:1.0;" x1="442.5" x2="442.5" y1="574.5703" y2="587.5703"/><line style="stroke:#B70000;stroke-width:1.0;" x1="401.5" x2="442.5" y1="587.5703" y2="587.5703"/><polygon fill="#B70000" points="411.5,583.5703,401.5,587.5703,411.5,591.5703,407.5,587.5703" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="407.5" y="569.5044">sowwakeup()</text><line style="stroke:#B70000;stroke-width:1.0;" x1="400.5" x2="442.5" y1="646.7031" y2="646.7031"/><line style="stroke:#B70000;stroke-width:1.0;" x1="442.5" x2="442.5" y1="646.7031" y2="659.7031"/><line style="stroke:#B70000;stroke-width:1.0;" x1="401.5" x2="442.5" y1="659.7031" y2="659.7031"/><polygon fill="#B70000" points="411.5,655.7031,401.5,659.7031,411.5,663.7031,407.5,659.7031" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="407.5" y="641.6372">pru_send()</text><polygon fill="#B70000" points="600.5,721.8359,610.5,725.8359,600.5,729.8359,604.5,725.8359" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="390.5" x2="606.5" y1="725.8359" y2="725.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="397.5" y="720.77">tcp_output()</text><line style="stroke:#B70000;stroke-width:1.0;" x1="510.5" x2="552.5" y1="754.9688" y2="754.9688"/><line style="stroke:#B70000;stroke-width:1.0;" x1="552.5" x2="552.5" y1="754.9688" y2="767.9688"/><line style="stroke:#B70000;stroke-width:1.0;" x1="511.5" x2="552.5" y1="767.9688" y2="767.9688"/><polygon fill="#B70000" points="521.5,763.9688,511.5,767.9688,521.5,771.9688,517.5,767.9688" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="517.5" y="749.9028">pru_send()</text><polygon fill="#B70000" points="595.5,823.1016,605.5,827.1016,595.5,831.1016,599.5,827.1016" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="500.5" x2="601.5" y1="827.1016" y2="827.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="507.5" y="822.0356">udp_output()</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="856.2344" y2="856.2344"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="856.2344" y2="869.2344"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="869.2344" y2="869.2344"/><polygon fill="#B70000" points="628.5,865.2344,618.5,869.2344,628.5,873.2344,624.5,869.2344" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="624.5" y="851.1685">insert IP options</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="898.3672" y2="898.3672"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="898.3672" y2="911.3672"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="911.3672" y2="911.3672"/><polygon fill="#B70000" points="628.5,907.3672,618.5,911.3672,628.5,915.3672,624.5,911.3672" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="624.5" y="893.3013">fill in header fields</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="940.5" y2="940.5"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="940.5" y2="953.5"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="953.5" y2="953.5"/><polygon fill="#B70000" points="628.5,949.5,618.5,953.5,628.5,957.5,624.5,953.5" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="624.5" y="935.4341">determine the route (i.e outgoing interface)</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="982.6328" y2="982.6328"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="982.6328" y2="995.6328"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="995.6328" y2="995.6328"/><polygon fill="#B70000" points="628.5,991.6328,618.5,995.6328,628.5,999.6328,624.5,995.6328" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="365" x="624.5" y="977.5669">if multicast addres, get outgoing interface and hop count</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="1024.7656" y2="1024.7656"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="1024.7656" y2="1037.7656"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="1037.7656" y2="1037.7656"/><polygon fill="#B70000" points="628.5,1033.7656,618.5,1037.7656,628.5,1041.7656,624.5,1037.7656" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="624.5" y="1019.6997">if brodcast address, check if brodcast is allowed</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="1066.8984" y2="1066.8984"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="1066.8984" y2="1079.8984"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="1079.8984" y2="1079.8984"/><polygon fill="#B70000" points="628.5,1075.8984,618.5,1079.8984,628.5,1083.8984,624.5,1079.8984" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="624.5" y="1061.8325">IPSec (i.e any encryption or security)</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="1109.0313" y2="1109.0313"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="1109.0313" y2="1122.0313"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="1122.0313" y2="1122.0313"/><polygon fill="#B70000" points="628.5,1118.0313,618.5,1122.0313,628.5,1126.0313,624.5,1122.0313" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="624.5" y="1103.9653">check filtering rules</text><path d="M589,1137.0313 L655,1137.0313 L655,1144.1641 L645,1154.1641 L589,1154.1641 L589,1137.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="350" x="589" y="1137.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="604" y="1150.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="264" x="670" y="1149.2417">[packet is smaller than maxpacket size]</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="1175.2969" y2="1175.2969"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="1175.2969" y2="1188.2969"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="1188.2969" y2="1188.2969"/><polygon fill="#B70000" points="628.5,1184.2969,618.5,1188.2969,628.5,1192.2969,624.5,1188.2969" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="624.5" y="1170.231">calculate checksum and continue</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="589" x2="939" y1="1197.2969" y2="1197.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="255" x="594" y="1207.5073">[packet is larger than maxpacket size]</text><line style="stroke:#B70000;stroke-width:1.0;" x1="617.5" x2="659.5" y1="1232.2344" y2="1232.2344"/><line style="stroke:#B70000;stroke-width:1.0;" x1="659.5" x2="659.5" y1="1232.2344" y2="1245.2344"/><line style="stroke:#B70000;stroke-width:1.0;" x1="618.5" x2="659.5" y1="1245.2344" y2="1245.2344"/><polygon fill="#B70000" points="628.5,1241.2344,618.5,1245.2344,628.5,1249.2344,624.5,1245.2344" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="624.5" y="1227.1685">fragment to smaller chunks and send each</text><polygon fill="#B70000" points="989.5,1303.0664,999.5,1307.0664,989.5,1311.0664,993.5,1307.0664" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="612.5" x2="995.5" y1="1307.0664" y2="1307.0664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="619.5" y="1302.0005">ip_output()</text><path d="M1006,1265.2344 L1006,1335.2344 L1295,1335.2344 L1295,1275.2344 L1285,1265.2344 L1006,1265.2344 " fill="#F8CDCC" style="stroke:#B70000;stroke-width:0.5;"/><path d="M1285,1265.2344 L1285,1275.2344 L1295,1275.2344 L1285,1265.2344 " fill="#F8CDCC" style="stroke:#B70000;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="1012" y="1282.3013">Once the packet is confirmed to go to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="1012" y="1297.4341">the correct destination, it is passed along</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="1012" y="1312.5669">to the NIC to be transmitted.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1012" y="1327.6997"> </text><polygon fill="#B70000" points="1121.5,1357.8984,1131.5,1361.8984,1121.5,1365.8984,1125.5,1361.8984" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1001.5" x2="1127.5" y1="1361.8984" y2="1361.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="1008.5" y="1356.8325">if_output()</text><line style="stroke:#B70000;stroke-width:1.0;" x1="1143.5" x2="1190.5" y1="1386.0313" y2="1386.0313"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1190.5" x2="1190.5" y1="1386.0313" y2="1399.0313"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1149.5" x2="1190.5" y1="1399.0313" y2="1399.0313"/><polygon fill="#B70000" points="1159.5,1395.0313,1149.5,1399.0313,1159.5,1403.0313,1155.5,1399.0313" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="1155.5" y="1380.9653">if_start()</text><path d="M1074,1419.0313 L1152,1419.0313 L1152,1426.1641 L1142,1436.1641 L1074,1436.1641 L1074,1419.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="161.3984" style="stroke:#000000;stroke-width:1.5;" width="182" x="1074" y="1419.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="1089" y="1432.0981">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1167" y="1431.2417">[ifq not full]</text><line style="stroke:#B70000;stroke-width:1.0;" x1="1153.5" x2="1195.5" y1="1457.2969" y2="1457.2969"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1195.5" x2="1195.5" y1="1457.2969" y2="1470.2969"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1154.5" x2="1195.5" y1="1470.2969" y2="1470.2969"/><polygon fill="#B70000" points="1164.5,1466.2969,1154.5,1470.2969,1164.5,1474.2969,1160.5,1470.2969" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1160.5" y="1452.231">ifq_dequeue</text><line style="stroke:#B70000;stroke-width:1.0;" x1="1153.5" x2="1195.5" y1="1529.4297" y2="1529.4297"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1195.5" x2="1195.5" y1="1529.4297" y2="1542.4297"/><line style="stroke:#B70000;stroke-width:1.0;" x1="1154.5" x2="1195.5" y1="1542.4297" y2="1542.4297"/><polygon fill="#B70000" points="1164.5,1538.4297,1154.5,1542.4297,1164.5,1546.4297,1160.5,1542.4297" style="stroke:#B70000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="1160.5" y="1524.3638">NIC DMA</text><polygon fill="#B70000" points="219.5,1604.5625,209.5,1608.5625,219.5,1612.5625,215.5,1608.5625" style="stroke:#B70000;stroke-width:1.0;"/><line style="stroke:#B70000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="213.5" x2="1132.5" y1="1608.5625" y2="1608.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="535" x="225.5" y="1603.4966">NIC IRQ. After the request has been transmitted, the NIC sends an interrupt request</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="215" x="1089.5" y="14.2822">EECS 4314 FreeBSD Analysis - BitTheory</text><!--SRC=[fLPDZzis4BthLmoSooxWR5fqWHOv1F3NjWOIrusTMm239aSIOOhKajGwRj7_tY4jovJNkmbG7mnJC-_DSDxCo5vwXV1W4SUhAVonNY_XCpusw3nyb3do0oTpLY8JQ64scwpW_fUVxpl0I3DrSDB1MnXBloxHs4EMkPtKDREiWdyoW96rPZynobXuC_xr9_fauIdtneuPtnNMD5gqzeVV9jF9f3CRIs6VGHV6uyl8QBqEN3Bh9PSrq_vbVEfqXGRW_sGmPPvjcNi5t7bS8VWtoxRc6mo-E1B3rOpZ0DxayNCg6QnG1wcO0qVFwlDbO30c7GWv2CQjlRIk3D-XXz5o7XqSouW9A5uRT6sPThMn7XGx19PJv9HbFLdspb-comkQ1VgziRlNIEPzZWuornvj7czD2MfvmVnHwbTf1rDyaXn1MFdKLa68CmVry0Sg2xo7tsThABsltVjtxmfZ2eLtt5GPuru-CO-XTkH7tewHjujrkxdDwFJsHA5ntnfILswqHXvyKpnbS2D8zTjCO1eZOyg7nfZTp-xZP0xX8NojFYtNGrWyh4Z14FD3g7fC95BTqkEE9kY1oY5C5wiXh0dVWKYQ5q2jQFq4dDauBJPvenJvAcFgpjHeBrNh0Dfu24vXJ21cTavmksVInrWNAOO7oUMFZu8on-GlgBDBNhFVinqszVExNw7jGMlRRAvNxHaoLgG5pmFMytfZ6bytuKeNpg6uNOsJ8BqQ9vXmR36Hkn7NkOFVcOG6PNx6I4t37QO7JEsbqIurvf8aaHhQJPvBLABd8926gv8QmPS8j9g8_qRU8T2lmaXT4BeTlzjUr1ogHj6GCNfbC24ikY4Kj4YUuu2HY2Kr3gV5voz8jjQ8X8D8U8byrpFHUuOfPVOeKl1ykK9-p9Nf0xKDjuTO0A1rw90tLlf3B-SZCvM44WiPsaQXYzrEEpKiGGhaAWf5bV8bqr2nRwt5oR-HUYCbOuetAiWHQLrJnNlIh7kf6pnsy9bNCLly26rkML4XhIrlkbnusUYTY_IXdu3weZpsvH6ePQXbqZaqCQIbB4fFXZyrFufxJeQIpAMjK8GeXQ7lhpfuS6CjBIfg2aUNOA6OGv0HKZFdo9yfGuKZRnCf5_D9eDXIWF2QgAJtAEw-whHtgLifGKfJY2ZvrGQdhTxzfkrChWd0ULhdwHIHHzPRHJ9_JDT43_wu4U6VJOFfg1D3RzAFvpCiN6pwQVHzIEySD0aafzT1O9b__kiEHhcFufCgxR-iChoC4NLQk65Nqo1p4FmuHBQf_Gdu7m00]--></g></svg>